import{_ as G,o as x,c as E,a as t,n as p,F as U,r as F,t as A,b as I,d as it,e as B,f as O,g as q,h as bt,i as vt,j as xt,k as v,w as J,l as Y,v as X,m as z,p as M,q as Et,s as N}from"./index-9YbvPDwl.js";import{d as wt,c as yt,l as At,s as Tt,z as kt,F as Dt,a as St,E as Ct,r as Mt}from"./zh_TW-cPtNwROo.js";const Pt={data(){return{}},props:["paginationObj"],watch:{paginationObj(){}},methods:{changePage(i){if(i.target.textContent==="Next")this.$emit("emit-selectPage",this.paginationObj.current_page+1);else if(i.target.textContent==="Previous")this.$emit("emit-selectPage",this.paginationObj.current_page-1);else{if(i.target.closest("li").className.includes("active"))return;this.$emit("emit-selectPage",i.target.textContent)}}},created(){},mounted(){}},Nt={class:"pagination justify-content-center"};function Ot(i,e,o,l,s,r){return x(),E("nav",null,[t("ul",Nt,[t("li",{class:p(["page-item",{disabled:!o.paginationObj.has_pre}])},[t("a",{class:p(["page-link",{"text-dark":!o.paginationObj.has_pre}]),onClick:e[0]||(e[0]=(..._)=>r.changePage&&r.changePage(..._))},"Previous",2)],2),(x(!0),E(U,null,F(o.paginationObj.total_pages,(_,d)=>(x(),E("li",{class:p(["page-item",{active:o.paginationObj.current_page===d+1}]),key:"key"+d},[t("a",{class:p(["page-link",{"text-dark":o.paginationObj.current_page===d+1}]),onClick:e[1]||(e[1]=(...u)=>r.changePage&&r.changePage(...u))},A(d+1),3)],2))),128)),t("li",{class:p(["page-item",{disabled:!o.paginationObj.has_next}])},[t("a",{class:p(["page-link",{"text-dark":!o.paginationObj.has_next}]),onClick:e[2]||(e[2]=(..._)=>r.changePage&&r.changePage(..._))},"Next",2)],2)])])}const Vt=G(Pt,[["render",Ot]]);var ot={exports:{}},R={exports:{}};/*!
  * Bootstrap backdrop.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var Q;function Lt(){return Q||(Q=1,function(i,e){(function(o,l){i.exports=l(I(),it(),B())})(O,function(o,l,s){const r="backdrop",_="fade",d="show",u=`mousedown.bs.${r}`,g={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},a={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class h extends l{constructor(c){super(),this._config=this._getConfig(c),this._isAppended=!1,this._element=null}static get Default(){return g}static get DefaultType(){return a}static get NAME(){return r}show(c){if(!this._config.isVisible){s.execute(c);return}this._append();const w=this._getElement();this._config.isAnimated&&s.reflow(w),w.classList.add(d),this._emulateAnimation(()=>{s.execute(c)})}hide(c){if(!this._config.isVisible){s.execute(c);return}this._getElement().classList.remove(d),this._emulateAnimation(()=>{this.dispose(),s.execute(c)})}dispose(){this._isAppended&&(o.off(this._element,u),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const c=document.createElement("div");c.className=this._config.className,this._config.isAnimated&&c.classList.add(_),this._element=c}return this._element}_configAfterMerge(c){return c.rootElement=s.getElement(c.rootElement),c}_append(){if(this._isAppended)return;const c=this._getElement();this._config.rootElement.append(c),o.on(c,u,()=>{s.execute(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(c){s.executeAfterTransition(c,this._getElement(),this._config.isAnimated)}}return h})}(R)),R.exports}var V={exports:{}};/*!
  * Bootstrap component-functions.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var tt;function Ut(){return tt||(tt=1,function(i,e){(function(o,l){l(e,I(),q(),B())})(O,function(o,l,s,r){const _=(d,u="hide")=>{const g=`click.dismiss${d.EVENT_KEY}`,a=d.NAME;l.on(document,g,`[data-bs-dismiss="${a}"]`,function(h){if(["A","AREA"].includes(this.tagName)&&h.preventDefault(),r.isDisabled(this))return;const n=s.getElementFromSelector(this)||this.closest(`.${a}`);d.getOrCreateInstance(n)[u]()})};o.enableDismissTrigger=_,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})})}(V,V.exports)),V.exports}var j={exports:{}};/*!
  * Bootstrap focustrap.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var et;function Ft(){return et||(et=1,function(i,e){(function(o,l){i.exports=l(I(),q(),it())})(O,function(o,l,s){const r="focustrap",d=".bs.focustrap",u=`focusin${d}`,g=`keydown.tab${d}`,a="Tab",h="forward",n="backward",c={autofocus:!0,trapElement:null},w={autofocus:"boolean",trapElement:"element"};class T extends s{constructor(b){super(),this._config=this._getConfig(b),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return c}static get DefaultType(){return w}static get NAME(){return r}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),o.off(document,d),o.on(document,u,b=>this._handleFocusin(b)),o.on(document,g,b=>this._handleKeydown(b)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,o.off(document,d))}_handleFocusin(b){const{trapElement:D}=this._config;if(b.target===document||b.target===D||D.contains(b.target))return;const C=l.focusableChildren(D);C.length===0?D.focus():this._lastTabNavDirection===n?C[C.length-1].focus():C[0].focus()}_handleKeydown(b){b.key===a&&(this._lastTabNavDirection=b.shiftKey?n:h)}}return T})}(j)),j.exports}var $={exports:{}};/*!
  * Bootstrap scrollbar.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var st;function It(){return st||(st=1,function(i,e){(function(o,l){i.exports=l(bt(),q(),B())})(O,function(o,l,s){const r=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",_=".sticky-top",d="padding-right",u="margin-right";class g{constructor(){this._element=document.body}getWidth(){const h=document.documentElement.clientWidth;return Math.abs(window.innerWidth-h)}hide(){const h=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,d,n=>n+h),this._setElementAttributes(r,d,n=>n+h),this._setElementAttributes(_,u,n=>n-h)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,d),this._resetElementAttributes(r,d),this._resetElementAttributes(_,u)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(h,n,c){const w=this.getWidth(),T=k=>{if(k!==this._element&&window.innerWidth>k.clientWidth+w)return;this._saveInitialAttribute(k,n);const b=window.getComputedStyle(k).getPropertyValue(n);k.style.setProperty(n,`${c(Number.parseFloat(b))}px`)};this._applyManipulationCallback(h,T)}_saveInitialAttribute(h,n){const c=h.style.getPropertyValue(n);c&&o.setDataAttribute(h,n,c)}_resetElementAttributes(h,n){const c=w=>{const T=o.getDataAttribute(w,n);if(T===null){w.style.removeProperty(n);return}o.removeDataAttribute(w,n),w.style.setProperty(n,T)};this._applyManipulationCallback(h,c)}_applyManipulationCallback(h,n){if(s.isElement(h)){n(h);return}for(const c of l.find(h,this._element))n(c)}}return g})}($)),$.exports}/*!
  * Bootstrap modal.js v5.3.2 (https://getbootstrap.com/)
  * Copyright 2011-2023 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(i,e){(function(o,l){i.exports=l(vt(),I(),q(),Lt(),Ut(),Ft(),B(),It())})(O,function(o,l,s,r,_,d,u,g){const a="modal",n=".bs.modal",c=".data-api",w="Escape",T=`hide${n}`,k=`hidePrevented${n}`,b=`hidden${n}`,D=`show${n}`,C=`shown${n}`,nt=`resize${n}`,lt=`click.dismiss${n}`,at=`mousedown.dismiss${n}`,rt=`keydown.dismiss${n}`,ct=`click${n}${c}`,H="modal-open",dt="fade",Z="show",W="modal-static",ut=".modal.show",mt=".modal-dialog",ht=".modal-body",_t='[data-bs-toggle="modal"]',gt={backdrop:!0,focus:!0,keyboard:!0},pt={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class S extends o{constructor(m,f){super(m,f),this._dialog=s.findOne(mt,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new g,this._addEventListeners()}static get Default(){return gt}static get DefaultType(){return pt}static get NAME(){return a}toggle(m){return this._isShown?this.hide():this.show(m)}show(m){this._isShown||this._isTransitioning||l.trigger(this._element,D,{relatedTarget:m}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(H),this._adjustDialog(),this._backdrop.show(()=>this._showElement(m)))}hide(){!this._isShown||this._isTransitioning||l.trigger(this._element,T).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Z),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){l.off(window,n),l.off(this._dialog,n),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new r({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new d({trapElement:this._element})}_showElement(m){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const f=s.findOne(ht,this._dialog);f&&(f.scrollTop=0),u.reflow(this._element),this._element.classList.add(Z);const y=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,l.trigger(this._element,C,{relatedTarget:m})};this._queueCallback(y,this._dialog,this._isAnimated())}_addEventListeners(){l.on(this._element,rt,m=>{if(m.key===w){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),l.on(window,nt,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),l.on(this._element,at,m=>{l.one(this._element,lt,f=>{if(!(this._element!==m.target||this._element!==f.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(H),this._resetAdjustments(),this._scrollBar.reset(),l.trigger(this._element,b)})}_isAnimated(){return this._element.classList.contains(dt)}_triggerBackdropTransition(){if(l.trigger(this._element,k).defaultPrevented)return;const f=this._element.scrollHeight>document.documentElement.clientHeight,y=this._element.style.overflowY;y==="hidden"||this._element.classList.contains(W)||(f||(this._element.style.overflowY="hidden"),this._element.classList.add(W),this._queueCallback(()=>{this._element.classList.remove(W),this._queueCallback(()=>{this._element.style.overflowY=y},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const m=this._element.scrollHeight>document.documentElement.clientHeight,f=this._scrollBar.getWidth(),y=f>0;if(y&&!m){const P=u.isRTL()?"paddingLeft":"paddingRight";this._element.style[P]=`${f}px`}if(!y&&m){const P=u.isRTL()?"paddingRight":"paddingLeft";this._element.style[P]=`${f}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(m,f){return this.each(function(){const y=S.getOrCreateInstance(this,m);if(typeof m=="string"){if(typeof y[m]>"u")throw new TypeError(`No method named "${m}"`);y[m](f)}})}}return l.on(document,ct,_t,function(ft){const m=s.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&ft.preventDefault(),l.one(m,D,P=>{P.defaultPrevented||l.one(m,b,()=>{u.isVisible(this)&&this.focus()})});const f=s.findOne(ut);f&&S.getInstance(f).hide(),S.getOrCreateInstance(m).toggle(this)}),_.enableDismissTrigger(S),u.defineJQueryPlugin(S),S})})(ot);var Bt=ot.exports;const qt=xt(Bt),Wt={methods:{showModal(){const i=new qt(this.$refs.modal,{keyboard:!1});this.modal=i,this.modal.show()},hideModal(){this.tempProduct={},this.$emit("emit-hideModal"),this.modal.hide()}}},Yt="https://ec-course-api.hexschool.io/",Rt="bftsai";wt("required",Mt);yt({validateOnInput:!0,generateMessage:At({zh_TW:kt})});Tt("zh_TW");const jt={data(){return{tempProduct:{},imageUrl:"",disabled:!1,fileData:""}},mixins:[Wt],props:{editModal:{typeof:Object,default(){return{}}}},components:{VForm:Dt,VField:St,ErrorMessage:Ct},watch:{imageUrl(){this.imageUrl?this.disabled=!0:this.disabled=!1},editModal(){this.tempProduct={...this.editModal},console.log(this.tempProduct)}},methods:{throttle(i){let e,o;return(...l)=>{o=l,!e&&(i(o),o=null,e=setTimeout(()=>{e=null,o&&(i(o),o=null)},1e3))}},onSubmit(i){console.log(i)},async loadFile(i){try{console.log(i.target.files[0]);const e=i.target.files[0],o=new FormData;o.append("file-to-upload",e);const l=await this.axios.post(`${Yt}/v2/api/${Rt}/admin/upload`,o);this.imageUrl=l.data.imageUrl}catch(e){console.log(e.response)}},deleteImageUrl(){this.imageUrl="",this.fileData=""},deleteTempImage(i){console.log(i.target.previousElementSibling),console.log(i.target.previousElementSibling.alt),console.log(i.target.previousElementSibling.alt.includes("imageUrl"))}},mounted(){}},$t={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},Kt={class:"modal-dialog modal-xl"},zt=t("div",{class:"modal-header"},[t("h5",{class:"modal-title fs-5",id:"exampleModalLabel"},"Edit Product"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Gt={class:"modal-body"},Ht={class:"row"},Zt={class:"col-4"},Jt={class:"row"},Xt={class:"col-12 mb-3 d-flex flex-column"},Qt=["disabled"],te=t("button",{type:"button",class:"btn btn-primary me-3"},"新增",-1),ee={key:0,class:"col-12 mb-3 position-relative"},se=["src"],ie=t("span",{class:"visually-hidden"},"unread messages",-1),oe={class:"row"},ne={class:"col-6 position-relative"},le=["src"],ae=t("span",{class:"visually-hidden"},"unread messages",-1),re=["src","alt"],ce=t("span",{class:"visually-hidden"},"unread messages",-1),de={class:"col-8"},ue={class:"mb-3 d-flex align-items-center"},me=t("label",{for:"title",class:"form-label"},"Title：",-1),he={class:"w-100 d-flex flex-column"},_e={class:"row"},ge={class:"col-6"},pe={class:"mb-3 d-flex align-items-center"},fe=t("label",{for:"category",class:"form-label"},"Category：",-1),be={class:"w-100 d-flex flex-column"},ve={class:"col-6"},xe={class:"mb-3 d-flex align-items-center"},Ee=t("label",{for:"unit",class:"form-label"},"Unit：",-1),we={class:"w-100 d-flex flex-column"},ye={class:"row"},Ae={class:"col-6"},Te={class:"mb-3 d-flex align-items-center"},ke=t("label",{for:"origin_price",class:"form-label"},"Origin_price：",-1),De={class:"w-100 d-flex flex-column"},Se={class:"col-6"},Ce={class:"mb-3 d-flex align-items-center"},Me=t("label",{for:"price",class:"form-label"},"Price：",-1),Pe={class:"w-100 d-flex flex-column"},Ne={class:"mb-3 d-flex align-items-center"},Oe=t("label",{for:"content",class:"form-label"},"Content：",-1),Ve={class:"w-100 d-flex flex-column"},Le={class:"mb-3"},Ue=t("label",{for:"description",class:"form-label"},"Description：",-1),Fe={class:"w-100"},Ie={class:"mb-3 d-flex align-items-center"},Be=["checked"],qe=t("label",{for:"is_enabled",class:"form-check-label"},"啟用",-1),We=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close"),t("button",{type:"submit",class:"btn btn-primary"},"Save changes")],-1);function Ye(i,e,o,l,s,r){const _=N("v-field"),d=N("error-message"),u=N("v-form");return x(),E("div",$t,[t("div",Kt,[v(u,{class:"modal-content",onSubmit:r.onSubmit},{default:J(({errors:g})=>[zt,t("div",Gt,[t("div",Ht,[t("div",Zt,[t("div",Jt,[t("div",Xt,[s.imageUrl?z("",!0):Y((x(),E("input",{key:0,type:"text",placeholder:"請輸入圖片網址",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=a=>s.imageUrl=a)},null,512)),[[X,s.imageUrl]]),t("input",{type:"file",class:"disabled",disabled:s.disabled,onChange:e[1]||(e[1]=(...a)=>r.loadFile&&r.loadFile(...a))},null,40,Qt),te]),s.imageUrl?(x(),E("div",ee,[t("img",{src:s.imageUrl,alt:"edit product pic",class:"object-fit-cover w-100"},null,8,se),t("span",{class:"position-absolute top-0 start-75 translate-middle badge rounded-circle bg-danger me-3",onClick:e[2]||(e[2]=(...a)=>r.deleteImageUrl&&r.deleteImageUrl(...a))},[M(" - "),ie])])):z("",!0)]),t("div",oe,[t("div",ne,[t("img",{src:s.tempProduct.imageUrl,alt:"'imageUrl'",class:"object-fit-cover w-100"},null,8,le),t("span",{class:"position-absolute top-0 start-75 translate-middle badge rounded-circle bg-danger me-3",onClick:e[3]||(e[3]=(...a)=>r.deleteTempImage&&r.deleteTempImage(...a))},[M(" - "),ae])]),(x(!0),E(U,null,F(s.tempProduct.imagesUrl,(a,h)=>(x(),E("div",{class:"col-6 position-relative",key:"key"+h},[t("img",{src:a,alt:"imagesUrl"+h,class:"object-fit-cover w-100"},null,8,re),t("span",{class:"position-absolute top-0 start-75 translate-middle badge rounded-circle bg-danger me-3",onClick:e[4]||(e[4]=(...n)=>r.deleteTempImage&&r.deleteTempImage(...n))},[M(" - "),ce])]))),128))])]),t("div",de,[t("div",ue,[me,t("div",he,[v(_,{type:"text",id:"title",class:p(["form-control",{"is-invalid":g.Title}]),name:"Title",modelValue:s.tempProduct.title,"onUpdate:modelValue":e[5]||(e[5]=a=>s.tempProduct.title=a),rules:"required"},null,8,["class","modelValue"]),v(d,{class:"invalid-feedback",name:"Title"})])]),t("div",_e,[t("div",ge,[t("div",pe,[fe,t("div",be,[v(_,{type:"text",id:"category",class:p(["form-control",{"is-invalid":g.Category}]),name:"Category",modelValue:s.tempProduct.category,"onUpdate:modelValue":e[6]||(e[6]=a=>s.tempProduct.category=a),rules:"required"},null,8,["class","modelValue"]),v(d,{class:"invalid-feedback",name:"Category"})])])]),t("div",ve,[t("div",xe,[Ee,t("div",we,[v(_,{type:"text",id:"unit",class:p(["form-control",{"is-invalid":g.Unit}]),name:"Unit",modelValue:s.tempProduct.unit,"onUpdate:modelValue":e[7]||(e[7]=a=>s.tempProduct.unit=a),rules:"required"},null,8,["class","modelValue"]),v(d,{class:"invalid-feedback",name:"Unit"})])])])]),t("div",ye,[t("div",Ae,[t("div",Te,[ke,t("div",De,[v(_,{type:"text",id:"origin_price",class:p(["form-control",{"is-invalid":g.Origin_price}]),name:"Origin_price",modelValue:s.tempProduct.origin_price,"onUpdate:modelValue":e[8]||(e[8]=a=>s.tempProduct.origin_price=a),rules:"required"},null,8,["class","modelValue"]),v(d,{class:"invalid-feedback",name:"Origin_price"})])])]),t("div",Se,[t("div",Ce,[Me,t("div",Pe,[v(_,{type:"text",id:"price",class:p(["form-control",{"is-invalid":g.Price}]),name:"Price",modelValue:s.tempProduct.price,"onUpdate:modelValue":e[9]||(e[9]=a=>s.tempProduct.price=a),rules:"required"},null,8,["class","modelValue"]),v(d,{class:"invalid-feedback",name:"Price"})])])])]),t("div",Ne,[Oe,t("div",Ve,[v(_,{type:"text",id:"content",class:p(["form-control",{"is-invalid":g.Content}]),name:"Content",modelValue:s.tempProduct.content,"onUpdate:modelValue":e[10]||(e[10]=a=>s.tempProduct.content=a),rules:"required"},null,8,["class","modelValue"]),v(d,{class:"invalid-feedback",name:"Content"})])]),t("div",Le,[Ue,t("div",Fe,[v(_,{name:"Description",rules:"required",modelValue:s.tempProduct.description,"onUpdate:modelValue":e[12]||(e[12]=a=>s.tempProduct.description=a)},{default:J(()=>[Y(t("textarea",{name:"Description",class:p(["w-100",{"is-invalid":g.Description}]),id:"description",cols:"30",rows:"3",placeholder:"請輸入產品描述","onUpdate:modelValue":e[11]||(e[11]=a=>s.tempProduct.description=a)},null,2),[[X,s.tempProduct.description]]),v(d,{name:"Description",class:"invalid-feedback"})]),_:2},1032,["modelValue"])])]),t("div",Ie,[Y(t("input",{type:"checkbox",id:"is_enabled",class:"form-check-input me-2",checked:s.tempProduct.is_enabled,"onUpdate:modelValue":e[13]||(e[13]=a=>s.tempProduct.is_enabled=a)},null,8,Be),[[Et,s.tempProduct.is_enabled]]),qe])])])]),We]),_:1},8,["onSubmit"])])],512)}const Re=G(jt,[["render",Ye]]),L="https://ec-course-api.hexschool.io/",K="bftsai",je={data(){return{products:[],paginationObj:{},itemSelect:{},productsNum:0}},components:{pagination:Vt,editModal:Re},props:["defaultTheme"],watch:{defaultTheme(){}},methods:{textDanger(i){if(!i&&this.defaultTheme==="light")return!0},textLight(i){if(!i&&this.defaultTheme==="dark")return!0},async getAllProducts(){try{const i=(await this.axios.get(`${L}v2/api/${K}/admin/products/all`)).data.products;this.productsNum=Object.keys(i)}catch(i){console.log(i.response.data)}},async getProducts(i){try{this.itemSelect={},this.product=[],this.$emit("emit-toggleLoading");const e=(await this.axios.get(`${L}v2/api/${K}/admin/products?page=${i}`)).data;this.products=e.products,this.paginationObj=e.pagination,this.$emit("emit-toggleLoading");const o={icon:"success",title:"已取得產品資料",timer:1500};this.$swal(o)}catch(e){console.log(e),this.$emit("emit-toggleLoading");const o={icon:"error",title:e.response.data.message};this.$swal(o)}},checkProduct(i){this.itemSelect=JSON.parse(JSON.stringify(i))},async postProduct(){try{const i={data:{title:"香蕉派",category:"蛋糕",origin_price:200,price:150,unit:"個",description:"呈現經典的美味及口感。",content:"尺寸：8寸",is_enabled:7,imageUrl:"https://images.unsplash.com/photo-1484723091739-30a097e8f929?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8YmFuYW5hJTIwcGllfGVufDB8fDB8fHww",imagesUrl:["https://images.unsplash.com/photo-1616953343564-dcf52de3262c?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fGJhbmFuYSUyMHBpZXxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1517777596324-5df4025800f2?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTJ8fGJhbmFuYSUyMHBpZXxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1636819232432-77f353ba39f8?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTZ8fGJhbmFuYSUyMHBpZXxlbnwwfHwwfHx8MA%3D%3D"]}},e=await this.axios.post(`${L}v2/api/${K}/admin/product`,i);console.log(e)}catch(i){console.log(i)}},async checkLogin(){try{this.$emit("emit-toggleLoading");const i=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=i;const e=(await this.axios.post(`${L}v2/api/user/check`)).data;e.success&&(this.$emit("emit-toggleLogin",e.success),this.getProducts(1)),this.$emit("emit-toggleLoading")}catch(i){this.$emit("emit-toggleLogin",i.response.data.success);const e={icon:"error",title:i.response.data.message,timer:1500};this.$swal(e),this.$emit("emit-toggleLoading"),i.response.data.success||this.$router.push("login")}},selectPage(i){this.getProducts(i)},editModal(i){this.itemSelect={...i},this.$refs.editModal.showModal()}},created(){this.$emit("emit-login"),this.checkLogin(),this.getAllProducts()}},$e={class:"container"},Ke={class:"row"},ze={class:"col-lg-8"},Ge=t("h1",null,"Products List",-1),He={class:"table table-hover"},Ze=t("thead",null,[t("tr",{class:"text-center"},[t("th",{class:"w-50",scope:"col"},"產品名稱"),t("th",{scope:"col"},"原價"),t("th",{scope:"col"},"售價"),t("th",{scope:"col"},"是否啟用"),t("th",{scope:"col"},"查看細節"),t("th",{scope:"col"},"編輯")])],-1),Je={class:"w-50 text-start"},Xe=["onClick"],Qe={colspan:"2"},ts=["onClick"],es={key:0,class:"col-lg-4"},ss=t("h2",null,"Product",-1),is=["src","alt"],os={class:"card-body"},ns={class:"card-title"},ls={class:"card-text"},as={class:"card-text"},rs={class:"card-text"},cs={class:"d-flex flex-wrap mb-3"},ds=["src","alt"];function us(i,e,o,l,s,r){const _=N("editModal"),d=N("pagination");return x(),E("div",$e,[t("div",Ke,[t("div",ze,[v(_,{ref:"editModal",editModal:s.itemSelect},null,8,["editModal"]),Ge,t("table",He,[Ze,t("tbody",null,[(x(!0),E(U,null,F(s.products,u=>(x(),E("tr",{key:u.title,class:"text-center"},[t("td",Je,A(u.title),1),t("td",null,A(u.origin_price),1),t("td",null,A(u.price),1),t("td",{class:p({"text-danger":r.textDanger(u.is_enabled),"text-light":r.textLight(u.is_enabled)})},A(u.is_enabled?"啟用":"未啟用"),3),t("td",null,[t("button",{type:"button",class:p(["btn w-100 p-1",{"btn-secondary":o.defaultTheme==="light","btn-outline-primary":o.defaultTheme==="dark"}]),onClick:g=>r.checkProduct(u)},"查看細節",10,Xe)]),t("td",Qe,[t("button",{type:"button",class:p(["btn p-1 me-3",{"btn-secondary":o.defaultTheme==="light","btn-outline-primary":o.defaultTheme==="dark"}]),onClick:g=>r.editModal(u)},"編輯",10,ts),t("button",{type:"button",class:p(["btn p-1 btn-outline-danger",{"text-primary":o.defaultTheme==="dark"}])},"刪除",2)])]))),128))])]),v(d,{"pagination-obj":s.paginationObj,onEmitSelectPage:r.selectPage},null,8,["pagination-obj","onEmitSelectPage"])]),s.itemSelect.id?(x(),E("div",es,[ss,t("div",{class:p(["card mb-3",{"border-primary":o.defaultTheme==="dark"}])},[t("img",{src:s.itemSelect.imageUrl,class:"card-img-top object-fit-contain",alt:s.itemSelect.title,height:"400"},null,8,is),t("div",os,[t("h5",ns,[M(A(s.itemSelect.title),1),t("span",{class:p(["badge ms-3",{" text-bg-secondary":o.defaultTheme==="light"," text-bg-primary":o.defaultTheme==="dark"}])},A(s.itemSelect.category),3)]),t("p",ls,"商品內容："+A(s.itemSelect.content),1),t("p",as,"商品描述："+A(s.itemSelect.description),1),t("p",rs,[M(A(s.itemSelect.price)+" ",1),t("span",{class:p(["line-through",{"text-light":o.defaultTheme==="dark"}])},A(s.itemSelect.origin_price),3),M("元 / 個")])])],2),t("div",cs,[(x(!0),E(U,null,F(s.itemSelect.imagesUrl,(u,g)=>(x(),E("img",{src:u,alt:"小圖"+g,key:"小圖"+g,height:"200",class:"me-3 mb-3"},null,8,ds))),128))])])):z("",!0)])])}const _s=G(je,[["render",us]]);export{_s as default};
